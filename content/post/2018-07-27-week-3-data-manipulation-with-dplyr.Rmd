---
title: 'Week 3: Data Manipulation with dplyr'
author: Masood Sadat
date: '2018-07-27'
slug: week-3-data-manipulation-with-dplyr
categories:
  - teaching
tags:
  - r tips
output:
  blogdown::html_page:
    toc: yes
description: Week 3 of Data Analysis with R- Learn about dplyr verbs for easy data manipulation, grouping and summarizing. Master pipe operator as an alternative to nesting multiple functions, which improves readability of complex code.
---

# About tidyverse

There are thousands of packages developed by even greater number of developers that provide new features or improve Râ€™s features. One of the most influential and beneficial set of packages is [**tidyverse**](https://www.tidyverse.org) which is a collection of other packages for data manipulation, exploration and visualization. All tidyverse packages share an underlying design philosophy, grammar, and data structures. The following are some of the most important **tidyverse** packages:

1. **dplyr** for data manipulation and data summary
2. **ggplot2** for data visualization
3. **tidyr** for data reshape
4. **readr** for fast and friendly data import/export
5. **stringr** for string manipulation

In this post we forcus on **dplyr** which is perhaps the most useful of all tidyverse packages.

# About dplyr

**dplyr** package provides a set of functions that makes a data manipulation extremely easy. There are many functions within **dplyr** package, but we will focus on a handful of them that are considered MUST.

- `select()` chooses variables/columns
- `slice()` chooses observations/rows
- `filter()` chooses observations/rows based on a logical condition
- `mutate()` adds new variables that are functions of existing ones
- `arrange()` sorts the data frame based on a column's value
- `summarize()` reduces data frame to a single summary
- `group_by()` changes the ordering of the observations/rows

```{r}
library(dplyr) #library(tidyverse)
```

# Pipe Operator

Before we jump to **dplyr** verbs, let's learn about pipe operator **%>%**. Pipe operator is arguably one of the most useful utilities in R language that is made available while loading **tidyverse**, **dplyr**, or **magrittr** packages. The aim of pipe operator is to read and understand R codes easier by expressing a complex operation into a sequence simple functions and steps.

The pipe operator **%>%** takes a value or the result of an expression into the next function. For example, head of _mtcars_ data can be written in the following manner using the pipe operator, instead of `head(mtcars)`:

```{r}
mtcars %>% head() # str(mtcars)
```

It is also possible to add multiple pipe operators, with each forwarding the result of previous expression into the next function. For example, here we turn **Titanic** data into a data frame and then print its head:

```{r}
Titanic %>%
  data.frame() %>%
  head()
```

If we were to not use pipe operators for the above cammand, we woud have to type `head(data.frame(Titanic))`, which is more difficult to read and understand.

## Select

```{r}
Titanic %>% 
data.frame() %>% 
select(Survived, Freq)
```

## Slice

```{r}
Titanic %>% 
data.frame() %>% 
slice(1:10)
```

## Filter

```{r}
Titanic %>% 
data.frame() %>% 
filter(Age == "Child")
```

## Mutate

Creates a new variable and adds it to the data frame.

```{r}
mtcars %>% 
mutate(model = rownames(mtcars))
```






